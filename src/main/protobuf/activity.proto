syntax = "proto3";

package convergence.protocol;

import "authentication.proto";

message ActivityState {
  map<string, string> state = 1;
}

message ActivityJoinMessage {
  string activityId = 1;
  map<string, string> state = 2;
}

message ActivityJoinResponseMessage {
  map<string, ActivityState> state = 1;
}

message ActivityLeaveMessage {
  string activityId = 1;
}

message ActivityParticipantsRequestMessage {
  string activityId = 1;
}

message ActivityParticipantsResponseMessage {
  map<string, ActivityState> state = 1;
}

message ActivitySessionJoinedMessage {
  string activityId = 1;
  SessionKey session = 2;
  map<string, string> state = 3;
}

message ActivitySessionLeftMessage {
  string activityId = 1;
  SessionKey session = 2;
}

message ActivitySetStateMessage {
  string activityId = 1;
  map<string, string> state = 2;
}

message ActivityRemoveStateMessage {
  string activityId = 1;
  repeated string keys = 2;
}

message ActivityClearStateMessage {
  string activityId = 1;
}

message ActivityRemoteStateSetMessage {
  string activityId = 1;
  SessionKey session = 2;
  map<string, string> state = 3;
}

message ActivityRemoteStateRemovedMessage {
  string activityId = 1;
  SessionKey session = 2;
  repeated string keys = 3;
}

message ActivityRemoteStateClearedMessage {
  string activityId = 1;
  SessionKey session = 2;
}
