syntax = "proto3";

package com.convergencelabs.protocol;

import "scalapb/scalapb.proto";

message SessionKey {
  string username = 1;
  string sessionId = 2;
}

message PasswordAuthRequestMessage {
  option (scalapb.message).extends = "com.convergencelabs.protocol.Request";
  option (scalapb.message).extends = "com.convergencelabs.protocol.Authentication";

  string username = 1;
  string password = 2;
}

message TokenAuthRequestMessage {
  option (scalapb.message).extends = "com.convergencelabs.protocol.Request";
  option (scalapb.message).extends = "com.convergencelabs.protocol.Authentication";

  string token = 1;
}

message ReconnectTokenAuthRequestMessage {
  option (scalapb.message).extends = "com.convergencelabs.protocol.Request";
  option (scalapb.message).extends = "com.convergencelabs.protocol.Authentication";

  string token = 1;
}

message AnonymousAuthRequestMessage {
  option (scalapb.message).extends = "com.convergencelabs.protocol.Request";
  option (scalapb.message).extends = "com.convergencelabs.protocol.Authentication";

  string displayName = 1;
}

message AuthenticationResponseMessage {
  option (scalapb.message).extends = "com.convergencelabs.protocol.Response";
  option (scalapb.message).extends = "com.convergencelabs.protocol.Authentication";

  bool success = 1;
  string username = 2;
  SessionKey session = 3;
  string reconnectToken = 4;
  map<string, string> presenceState = 5 ;
}
